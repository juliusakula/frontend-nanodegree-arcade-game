/*! frogger-arcade-clone 2015-04-09 */

var X_LEFT=0,X_RIGHT=707,Y_TOP=0,Y_BOTTOM=498,X_STEP=101,Y_STEP=83,X_CANVAS=707,Y_CANVAS=606,DARK_LEVELS=25,gamestate,map,player,allEnemies,allItems,allAttacks,levelStartTime,levelFinishTime,inRange=function(a,b,c){return c>=a&&a>=b?!0:!1},randInt=function(a,b){return Math.floor(Math.random()*(b-a+1)+a)},choice=function(a){return a[Math.floor(Math.random()*a.length)]},removeElement=function(a,b){var c=b.indexOf(a);-1!==c&&b.splice(c,1)},pauseAlert=function(a){gamestate.paused=!0,bootbox.alert(a,function(){gamestate.paused=!1})},generateWeightedList=function(a,b){for(var c=[],d=0;d<b.length;d++)for(var e=100*b[d],f=0;e>f;f++)c.push(a[d]);return c},keys=[],secretCode="38,38,40,40,37,39,37,39,66,65",cheats={"there is no cow level":function(){gamestate.activeCheats.cow=!0,allEnemies.forEach(function(a){a.sprite="images/Cow.png"})},"I AM INVINCIBLE!!!":function(){gamestate.activeCheats.invincible=!0,player.blink(),player.isInvincible=!0},"Street fighter is cool":function(){gamestate.activeCheats.hadouken=!0},"This game is completely Udacious!!!":function(){gamestate.activeCheats.udacity=!0,player.isUdacious=!0,player.hasKey=!0},"Hot tub time machine":function(){bootbox.alert(timeMachineMessage1,function(){$("#page-header").html("HUH???"),gamestate.activeCheats.time=!0,gamestate.level=-1,$("#level").html("?")})},"Throw tomatoes":function(){gamestate.activeCheats.tomato=!0}},GameState=function(){this.paused=!1,this.level=1,this.speed=1,this.score=0,this.activeCheats={cow:!1,hadouken:!1,time:!1,udacity:!1,invincible:!1,tomato:!1},this.hadouken=!1,this.tomato=!1};window.addEventListener("keydown",function(a){[37,38,39,40].indexOf(a.keyCode)>-1&&a.preventDefault()},!1),document.addEventListener("keyup",function(a){var b={37:"left",38:"up",39:"right",40:"down",80:"p",67:"c",81:"q",69:"e",65:"a",68:"d"};player&&(player.godMode||(keys.push(a.keyCode),keys.toString().indexOf(secretCode)>=0&&(player.godMode=!0,pauseAlert(unlockCheatsMessage),keys=[])),player.handleInput(b[a.keyCode]))});var deathMessage="<h2>Crushed Like a Bug...</h2><hr><div class='text-left'><p>...by a bug.  Wait, what!?</p><p>How does that even happen?  I thought you were supposed to be the chosen one!</p><p>And you're taken down by a bug?  Ok, we're doomed...'</p><br><p><em>(Actually for all I know you drowned, because I'm lazy and didn't write more than one death dialog.  Heck, you could've even been run over by a <strong>Cow</strong>! Wouldn't that be something?)</em></p></div>",gameOverMessage="<h2>The Prophecies Were Wrong...</h2><hr><p>...or I misinterpreted them...but never mind that.</p><p>Either way, not too great to be you right now, Steve.  Well...if you want to try again and be not-terrible this time, feel free.</p><br><h5 style='text-style:underline'>Your Stats</h5><p style='text-align:center'>Level: <span id='finalLevel'></span></p><p style='text-align:center'>Score: <span id='score'></span></p>",openingMessage="<h2>Greetings Traveler!</h2><div class='text-left'><hr><p>What's your name, son?</p><p>What was that?  Speak up, boy!  Eh, it doesn't matter.  It's entirely irrelevant to this game.</p><p>Anywho, the prophecies foretold an inexplicably silent boy named...uhhhh...I don't know?  Steve?  <em>Steve?</em>  Yeah let's go with that.</p><p>Like I was saying, this kid Steve was going to save our land from all these bugs running around all over the place, moving left to right...over and over.  It's maddening!!</p><p>Huh, what's that!?  You want to know how you're supposed to save us?  Sorry Steve-o, prophecy wasn't so specific.  Though I'm thinkin' if you keep on grabbin' these keys...</p><img src='images/Key.png' alt='Key'><p>And heading through these door...errr...rock...uhhhhh...rock-door dealies...</p><img src='images/Door.png' alt='Door'><p>Everything's going to turn out ALLLLLLLRIGHT!!</p><p>Now get going you fool!  We're all counting on you!</p></div>",instructionMessage="<h2>Game: How to Play It</h2><hr><div class='text-left'><p>Now to move ole Stevie here, use these:</p><img src='images/arrow_keys.png' alt='Arrow Keys'><p>Move him to the key like I showed you before, then get him to that there rock-door.  (And stay away from water.  Our friend Steve here can't swim.)</p><p>The faster you complete a level, the more points you get! And you'll get even more points if you collect a <strong>Gem</strong> along the way!</p><p>Keep on going as long as you can!</p><p>Also you can press <strong>P</strong> at any time to <strong>Pause</strong> the game.  Press <strong>Enter</strong> to resume play.</p></div>",pauseMessage="<h2>Game Paused</h2><hr><p>Press <strong>Enter</strong> to resume.</p>",unlockCheatsMessage="<h4>You Have Pleased the Gods...</h4><hr><div class='text-left'><p>...with your little 'up,up,down,down' dance! They've bestowed their powers upon you!</p><p>Now press </strong>C</strong> and your bidding will be done!</p><p><em>(...or nothing will happen at all and you'll just look like a fool)</em></p></div>",commandMessage="<h5>What is your bidding oh Great One?</h5>",invincibleMessage="<h2>Hey you're all blinky!  That's pretty cool!</h2><hr><p>(P.S. You're invincible now)</p><p>(P.S.S. You still don't know how to swim...)</p>",cowMessage="<h2><em>Mooooooooooooooooooooooooooo...</em></h2>",udaciousMessage="<h4>Hey, I think so too!  Glad you're enjoying it!</h4><hr><p>Try pressing <strong>Q</strong> or <strong>E</strong>!",hadoukenMessage="<h2>HADOUKEN!!!</h2><hr><p>I'd recommend pressing <strong>A</strong> or <strong>D</strong></p>",tomatoMessage="<h2>TOE MAH TOE!!!</h2><hr><p>I'd recommend pressing <strong>A</strong> or <strong>D</strong></p>",timeMachineMessage1="<h2>You Step Into The Time Machine...</h2><hr><div class='text-left'><p>...hoping to go back in time and tell your past self to avoid this place so you'll never get roped into running around getting crushed by giant bugs repeatedly...</p></div>",timeMachineMessage2="<div class='text-left'<<p>...but something went very wrong. Where (when??) are you?</p></div>",cheatMessages={"there is no cow level":cowMessage,"I AM INVINCIBLE!!!":invincibleMessage,"This game is completely Udacious!!!":udaciousMessage,"Street fighter is cool":hadoukenMessage,"Hot tub time machine":timeMachineMessage2,"Throw tomatoes":tomatoMessage},Enemy=function(){this.width=90,this.height=80,this.maxSpeed=200,this.minSpeed=50,this.xStartOptions=[],this.yStartOptions=[];for(var a=-3;5>a;a++)this.xStartOptions.push(a*X_STEP);for(var b=1;5>b;b++)this.yStartOptions.push(b*Y_STEP);this.startX(),this.startY(),this.setSpeed(),this.sprite="images/enemy-bug.png",gamestate.activeCheats.cow&&(this.sprite="images/Cow.png")};Enemy.prototype.update=function(a){gamestate.paused||(this.x+=a*this.speed*gamestate.speed),this.x>X_RIGHT&&(this.x=-3*X_STEP,this.startY())},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y-20)},Enemy.prototype.left=function(){return this.x},Enemy.prototype.right=function(){return this.x+this.width},Enemy.prototype.top=function(){return this.y},Enemy.prototype.bottom=function(){return this.y+this.height},Enemy.prototype.startX=function(){return this.x=choice(this.xStartOptions),this},Enemy.prototype.startY=function(){return this.y=choice(this.yStartOptions),this},Enemy.prototype.setSpeed=function(){return this.speed=randInt(this.minSpeed,this.maxSpeed),this};var Charger=function(){Enemy.call(this),this.sprite="images/charger.png",gamestate.activeCheats.cow&&(this.sprite="images/Cow.png"),this.charging()};Charger.prototype=Object.create(Enemy.prototype),Charger.prototype.constructor=Charger,Charger.prototype.charging=function(){var a=this,b=a.speed,c=randInt(2e3,5e3);setInterval(function(){var c=Math.random();c>.5&&(gamestate.activeCheats.cow||(a.sprite="images/charger-charging.png"),a.speed=700,setTimeout(function(){a.speed=b,gamestate.activeCheats.cow||(a.sprite="images/charger.png")},500))},c)};var Sidestepper=function(){Enemy.call(this),this.sideStepSpeed=0,this.newY=this.y,this.sprite="images/sidestepper.png",gamestate.activeCheats.cow&&(this.sprite="images/Cow.png"),this.sidestep()};Sidestepper.prototype=Object.create(Enemy.prototype),Sidestepper.prototype.constructor=Sidestepper,Sidestepper.prototype.update=function(a){Enemy.prototype.update.call(this,a),gamestate.paused||(this.y+=a*this.sideStepSpeed*gamestate.speed,(this.sideStepSpeed>0&&this.y>this.newY||this.sideStepSpeed<0&&this.y<this.newY)&&(this.y=this.newY,this.sideStepSpeed=0))},Sidestepper.prototype.sidestep=function(){var a=this,b=randInt(1e3,3e3);setInterval(function(){var b=Math.random();if(b>.3&&0===a.sideStepSpeed){var c=Math.random();c>=.5&&a.y<Y_BOTTOM-2*Y_STEP?(a.newY=a.y+Y_STEP,a.sideStepSpeed=100):.5>c&&a.y>Y_TOP+Y_STEP&&(a.newY=a.y-Y_STEP,a.sideStepSpeed=-100)}},b)};var Backtracker=function(){Enemy.call(this),this.sprite="images/backtracker.png",gamestate.activeCheats.cow&&(this.sprite="images/Cow.png"),this.backtrack()};Backtracker.prototype=Object.create(Enemy.prototype),Backtracker.prototype.constructor=Backtracker,Backtracker.prototype.update=function(a){gamestate.paused||(this.x+=a*this.speed*gamestate.speed),this.left()>X_RIGHT+2*X_STEP&&this.speed>0&&(this.speed*=-1,this.sprite=gamestate.activeCheats.cow?"images/Cow-reverse.png":"images/backtracker-reverse.png"),this.right()<X_LEFT-2*X_STEP&&this.speed<0&&(this.speed*=-1,this.sprite=gamestate.activeCheats.cow?"images/Cow.png":"images/backtracker.png")},Backtracker.prototype.backtrack=function(){var a=this,b=randInt(5e3,1e4);setInterval(function(){var b=Math.random();b>.2&&(a.speed*=-1,a.sprite=gamestate.activeCheats.cow?a.speed>0?"images/Cow.png":"images/Cow-reverse.png":a.speed>0?"images/backtracker.png":"images/backtracker-reverse.png")},b)};var Slowpoke=function(){Enemy.call(this),this.sprite="images/slowpoke.png",gamestate.activeCheats.cow&&(this.sprite="images/Cow.png"),this.minSpeed=15,this.maxSpeed=25,this.setSpeed()};Slowpoke.prototype=Object.create(Enemy.prototype),Slowpoke.prototype.constructor=Slowpoke;var Centipede=function(){Enemy.call(this),this.sprite="images/centipede.png",gamestate.activeCheats.cow&&(this.sprite="images/Cow-centipede.png"),this.width=270};Centipede.prototype=Object.create(Enemy.prototype),Centipede.prototype.constructor=Centipede;var CentipedeSidestepper=function(){Enemy.call(this),this.width=270,this.sideStepSpeed=0,this.newY=this.y,this.sprite="images/centipede-sidestepper.png",this.sidestep()};CentipedeSidestepper.prototype=Object.create(Enemy.prototype),CentipedeSidestepper.prototype.constructor=CentipedeSidestepper,CentipedeSidestepper.prototype.update=function(a){Enemy.prototype.update.call(this,a),gamestate.paused||(this.y+=a*this.sideStepSpeed*gamestate.speed,(this.sideStepSpeed>0&&this.y>this.newY||this.sideStepSpeed<0&&this.y<this.newY)&&(this.y=this.newY,this.sideStepSpeed=0))},CentipedeSidestepper.prototype.sidestep=function(){var a=this,b=randInt(1e3,3e3);setInterval(function(){var b=Math.random();if(b>.3&&0===a.sideStepSpeed){var c=Math.random();c>=.5&&a.y<Y_BOTTOM-2*Y_STEP?(a.newY=a.y+Y_STEP,a.sideStepSpeed=100):.5>c&&a.y>Y_TOP+Y_STEP&&(a.newY=a.y-Y_STEP,a.sideStepSpeed=-100)}},b)};var BacktrackerSidestepper=function(){Enemy.call(this),this.sideStepSpeed=0,this.newY=this.y,this.sprite="images/enemy-bug-white.png",this.speed=110,this.backtrack(),this.sidestep()};BacktrackerSidestepper.prototype=Object.create(Enemy.prototype),BacktrackerSidestepper.prototype.constructor=BacktrackerSidestepper,BacktrackerSidestepper.prototype.update=function(a){gamestate.paused||(this.x+=a*this.speed*gamestate.speed,this.y+=a*this.sideStepSpeed*gamestate.speed,(this.sideStepSpeed>0&&this.y>this.newY||this.sideStepSpeed<0&&this.y<this.newY)&&(this.y=this.newY,this.sideStepSpeed=0)),(this.left()>X_RIGHT+2*X_STEP&&this.speed>0||this.right()<X_LEFT-2*X_STEP&&this.speed<0)&&(this.speed*=-1),this.sprite=this.speed>0?"images/enemy-bug-white.png":"images/enemy-bug-white-reverse.png"},BacktrackerSidestepper.prototype.backtrack=function(){var a=this,b=randInt(3e3,9e3);setInterval(function(){var b=Math.random();b>.3&&(a.speed*=-1)},b)},BacktrackerSidestepper.prototype.sidestep=function(){var a=this,b=randInt(2e3,5e3);setInterval(function(){var b=Math.random();if(b>.3&&0===a.sideStepSpeed){var c=Math.random();c>=.5&&a.y<Y_BOTTOM-2*Y_STEP?(a.newY=a.y+Y_STEP,a.sideStepSpeed=100):.5>c&&a.y>Y_TOP+Y_STEP&&(a.newY=a.y-Y_STEP,a.sideStepSpeed=-100)}},b)};var BroodMother=function(){Enemy.call(this),this.sprite="images/brood-mother.png",this.minSpeed=15,this.maxSpeed=25,this.maxChildren=3,this.numChildren=0,this.setSpeed(),this.spawn()};BroodMother.prototype=Object.create(Enemy.prototype),BroodMother.prototype.constructor=BroodMother,BroodMother.prototype.spawn=function(){var a=this,b=randInt(1e3,4e3);setInterval(function(){var b=Math.random();if(b>.1&&a.numChildren<a.maxChildren){var c=new BacktrackerSidestepper;c.x=a.x,c.y=a.y,allEnemies.push(c);var d=new Backtracker;d.speed*=-1,d.x=a.x,d.y=a.y,d.sprite="images/backtracker-reverse.png",allEnemies.push(d),a.numChildren++}},b)};var SpeedChanger=function(){Enemy.call(this),this.sprite="images/speed-changer.png",this.minSpeed=15,this.maxSpeed=175,this.setSpeed(),this.changeSpeed()};SpeedChanger.prototype=Object.create(Enemy.prototype),SpeedChanger.prototype.constructor=SpeedChanger,SpeedChanger.prototype.changeSpeed=function(){var a=this,b=randInt(750,2750);setInterval(function(){a.setSpeed()},b)};var Player=function(){this.width=60,this.height=80,this.maxLives=20,this.lives=10,this.isInvincible=!1,this.hasKey=!1,this.startX(),this.startY(),this.sprite="images/char-boy.png"};Player.prototype.update=function(){},Player.prototype.render=function(){gamestate.activeCheats.udacity?ctx.drawImage(Resources.get("images/Udacity.png"),this.x,this.y+20):(ctx.drawImage(Resources.get(this.sprite),this.x,this.y-20),this.hasKey&&ctx.drawImage(Resources.get("images/Key-Small.png"),this.x+15,this.y+70))},Player.prototype.startX=function(){return this.x=map.start.x,this},Player.prototype.startY=function(){return this.y=map.start.y,this},Player.prototype.left=function(){return this.x+20},Player.prototype.right=function(){return this.x+this.width},Player.prototype.top=function(){return this.y},Player.prototype.bottom=function(){return this.y+this.height},Player.prototype.move=function(a){var b=this.x,c=this.y;"left"===a&&(b=this.x-X_STEP),"right"===a&&(b=this.x+X_STEP),"up"===a&&(c=this.y-Y_STEP),"down"===a&&(c=this.y+Y_STEP),gamestate.activeCheats.time&&("left"===a&&(b+=2*X_STEP),"right"===a&&(b-=2*X_STEP),"up"===a&&(c+=2*Y_STEP),"down"===a&&(c-=2*Y_STEP));var d=!1;if(map.tiles.forEach(function(a){b===a.x&&c===a.y&&(d=!0)}),d){if(b===map.end.x&&c===map.end.y&&!this.hasKey)return;var e=!1;map.rocks.forEach(function(a){b===a.x&&c===a.y&&(e=!0)}),e||(this.x=b,this.y=c)}},Player.prototype.enterCommand=function(){gamestate.paused=!0,bootbox.prompt(commandMessage,function(a){null!==a&&cheats[a]?(bootbox.alert(cheatMessages[a],function(){gamestate.paused=!1}),cheats[a]()):gamestate.paused=!1})},Player.prototype.handleInput=function(a){gamestate.paused||(this.move(a),("a"===a||"d"===a)&&(console.log("tomato"),allAttacks.push(new Tomato(a))),"p"===a&&pauseAlert(pauseMessage),this.godMode&&("c"===a&&this.enterCommand(),gamestate.activeCheats.hadouken&&("a"===a||"d"===a)&&(gamestate.hadouken=!0,setTimeout(function(){gamestate.hadouken=!1},500),allAttacks.push(new Hadouken(a))),gamestate.activeCheats.udacity&&("q"===a||"e"===a)&&allAttacks.push(new FrontEndAttack(a))))},Player.prototype.blink=function(){var a=this;setInterval(function(){a.sprite="images/char-boy-blink1.png",setTimeout(function(){a.sprite="images/char-boy-blink2.png"},100),setTimeout(function(){a.sprite="images/char-boy-blink3.png"},200)},300)};var Attack=function(){this.x=player.x,this.y=player.y,this.width=80,this.height=80,this.renderOffsetY=40};Attack.prototype.update=function(a){gamestate.paused||(this.x+=a*this.speed*gamestate.speed),(this.x>X_RIGHT||this.x<X_LEFT-X_STEP)&&(this.speed=0)},Attack.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y+this.renderOffsetY)},Attack.prototype.left=function(){return this.x},Attack.prototype.right=function(){return this.x+this.width},Attack.prototype.top=function(){return this.y},Attack.prototype.bottom=function(){return this.y+this.height};var Hadouken=function(a){Attack.call(this),"a"===a?(this.speed=-300,this.sprite="images/Hadouken-left.png"):"d"===a&&(this.speed=300,this.sprite="images/Hadouken-right.png")};Hadouken.prototype=Object.create(Attack.prototype),Hadouken.prototype.constructor=Hadouken;var FrontEndAttack=function(a){Attack.call(this),this.y=player.y-Y_STEP,this.renderOffsetY=Y_STEP-30,this.height=210,"q"===a?this.speed=-300:"e"===a&&(this.speed=300),this.sprite="images/Front-End.png"};FrontEndAttack.prototype=Object.create(Attack.prototype),FrontEndAttack.prototype.constructor=FrontEndAttack;var Tomato=function(a){Attack.call(this),"a"===a?(this.speed=-300,this.sprite="images/tomato-left.png"):"d"===a&&(this.speed=300,this.sprite="images/tomato-right.png")};Tomato.prototype=Object.create(Attack.prototype),Tomato.prototype.constructor=Tomato;var Item=function(a,b){this.x=a,this.y=b,this.renderOffsetY=-20,this.destroyed=!1};Item.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y+this.renderOffsetY)},Item.prototype.update=function(){};var Heart=function(a,b){Item.call(this,a,b),this.sprite="images/Heart.png"};Heart.prototype=Object.create(Item.prototype),Heart.prototype.constructor=Heart;var Key=function(a,b){Item.call(this,a,b),this.sprite="images/Key.png"};Key.prototype=Object.create(Item.prototype),Key.prototype.constructor=Key;var Gem=function(a,b){Item.call(this,a,b),this.spriteOptions=["images/Gem Blue.png","images/Gem Green.png","images/Gem Orange.png"],this.sprite=choice(this.spriteOptions),this.fading=!1,this.disappear()};Gem.prototype=Object.create(Item.prototype),Gem.prototype.constructor=Gem,Gem.prototype.render=function(){this.fading&&(ctx.globalAlpha=.5),ctx.drawImage(Resources.get(this.sprite),this.x,this.y+this.renderOffsetY),ctx.globalAlpha=1},Gem.prototype.disappear=function(){var a=this,b=2500,c=b+1500;setTimeout(function(){a.fading=!0},b),setTimeout(function(){a.destroyed=!0},c)};var MapTile=function(a,b){this.x=a,this.y=b};MapTile.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Grass=function(a,b){MapTile.call(this,a,b),this.sprite="images/grass-block.png",gamestate.level>DARK_LEVELS&&(this.sprite="images/dead-grass-block.png")};Grass.prototype=Object.create(MapTile.prototype),Grass.prototype.constructor=Grass;var Stone=function(a,b){MapTile.call(this,a,b),this.sprite="images/stone-block.png",gamestate.level>DARK_LEVELS&&(this.sprite="images/dark-stone-block.png")};Stone.prototype=Object.create(MapTile.prototype),Stone.prototype.constructor=Stone;var Water=function(a,b){MapTile.call(this,a,b),this.sprite="images/water-block.png",gamestate.level>DARK_LEVELS&&(this.sprite="images/lava-block.png")};Water.prototype=Object.create(MapTile.prototype),Water.prototype.constructor=Water;var MapObject=function(a,b){this.x=a,this.y=b};MapObject.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y-20)};var StartPoint=function(a,b){MapObject.call(this,a,b),this.sprite="images/nothing.png"};StartPoint.prototype=Object.create(MapObject.prototype),StartPoint.prototype.constructor=StartPoint;var Door=function(a,b){MapObject.call(this,a,b),this.sprite="images/Door.png"};Door.prototype=Object.create(MapObject.prototype),Door.prototype.constructor=Door;var Rock=function(a,b){MapObject.call(this,a,b),this.sprite="images/Rock.png"};Rock.prototype=Object.create(MapObject.prototype),Rock.prototype.constructor=Rock;
//# sourceMappingURL=app.min.js.map